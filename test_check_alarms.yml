#################################################################
#   Checks system and chassis alarms
#################################################################
tests_include:
  - show_chassis_alarms
  - show_system_alarms

show_chassis_alarms:
  - command: show chassis alarms
  - iterate:
      xpath: alarm-summary[boolean(no-active-alarms)] | alarm-detail
      tests:
        - not-exists: alarm-description
          info: 'PASSED! No chassis alarms'
          err: 'FAILED! There is chassis alarm: {{post["alarm-description"]}}'


show_system_alarms:
  - command: show system alarms
  - iterate:
      xpath: alarm-summary[boolean(no-active-alarms)] | alarm-detail
      tests:
        - not-exists: alarm-description
          info: 'PASSED! No system alarms'
          err: 'FAILED! There is system alarm: {{post["alarm-description"]}}'
      